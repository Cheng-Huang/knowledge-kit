# 上架包预检

## 常见被拒原因汇总

### iOS 

钱伴

敏感词：审核、热更新、开关
1. App 内包含分发下载分发功能（比如贷款超市、引导用户下载 App 等功能）。
2. 提供的测试账号无法查看贷款实际利率。
3. notification 接口返回：showupgrade：true，提示用户升级。 审核期间接口不要返回该字段。
4. 审核账号，任何时候在任何ip登录看到的都是审核版。 
5. 审核的时候屏蔽 getwarehouseinfo 接口（tab接口）。审核期间 getwarehouseinfo 接口不返回数据。读取本地的配置
6. upgrade：签到不能展示。    方案：把现在提额页copy一份，通过审核开关控制展示哪个页面。隐藏活动入口
7. getSdkConfig 屏蔽接口返回内容。审核阶段接口返回空
8. switch字样接口
9. review字样接口

基金：
没有发版问题


挖财宝：
1. App 内部某个控件点击后跳转到了信用卡的 H5 页面，可以引导用户线下办卡
2. 提供的登陆账号和密码不对，登陆不上
3. 运营填写的营销关键字有问题
4. 元数据问题，iPhoneX 截图中 iPhone 壳子是 iPhone7 的，应该是 iPhoneX
5. 说明隐私权限的作用。

闪电公积金：
1. 苹果看到“代缴公积金”，这个需要有政府机构资质，此类功能在审核期间都关闭。


社保：
1. 修改隐私权限相关的文案，做到让审核人员看得懂


记账：
1. Guidelines 3.2.2 审核期间，隐藏邀请好友、天天挖宝相关的运营活动


信用保镖：
1. 狗年大礼包： 修改元数据后申诉；更换销售地区后提审。
   

### Android

信贷超人：
1. App 无法登陆进去，属于 bug 级别
2. App 没有适配 ipad。
3.  Privacy - Data Collection and Storage，说明 App 没有做隐私权限的收集。
4.  访问 h5 页面出现问题。 属于 bug 级别

微记账：
暂无


挖财宝：

1. 原因：挖财宝集成了设备指纹SDK, 会上传用户设备安装应用列表，所以被拒.   解决：移除设备指纹SDK, 成功上架
2. 原因：挖财宝中，存在更多App按钮，会导向应用宝，所以被华为拒过，其他应用市场没有拒过. 解决：移除更多App按钮，无再被华为拒过。
   

基金：
暂未遇到审核被拒的情况。

快贷：
暂未遇到审核被拒的情况。

钱伴：
暂未遇到审核被拒的情况。

信用卡：

1. 经检测你的应用targetsdk版本低于26 ，请修改。
2. 你的应用未加固
3. 你提交的应用被检测到存在不合理获取短信/通话记录相关权限的行为，请勿获取SEND_SMS、READ_SMS、READ_CALL_LOG、RECEIVE_SMS权限。
4. 你的应用注册登录界面的《用户协议》内容空白，请添加。
5. 你的应用注册登录时无法接收验证码，注册登录时需输入图形验证码，且无图形参考，请定位修复。
6. 在你的应用内任选一款借贷产品注册点击下载应用后直接进入第三方下载渠道，请修改为华为应用市场下载链接或者直接删除应用分发模块。
7. 你的应用版权未通过审核，请提供a.《计算机软件著作权证书》或《APP电子版权证书》； b. ICP备案；c.《免责函》；d.你提供的合作协议已到期，请重新提供至少三家贷款产品合作单位的金融监管部门备案登记文件、授权书。e.请提供《金融许可证》或对应银行信用卡中心授权证明（至少三家）。免责函模板下载链接，https://url.cloud.huawei.com/1vbaVckwPC 
8. 你的应用截图与实际内容不相符，请修改。如有疑问，请发邮件至developer@huawei.com。
9. 使用了动态更新的能力。回复苹果，问具体使用的地方，并贴出代码。



只能根据政策去做，比如当前的隐私权权限问题就是政策
还有一些如理财、贷款类，没有资质就无法过审，这个也是政策。

解决方案：

苹果那边是把接口字段定义的隐晦一点。之前是定义了一个颜色值作为审核的开关
如果是对应的颜色，就开启相应功能。




## 原因汇总

从 Android 和 iOS 2端 App 被驳回的一些信息来看，驳回原因一般划分为下面几类：

1. 审核期间，资源和配置都应该调节为审核模式
2. App 包含某些关键字
3. 审核相关的元数据问题（截图与实际内容不匹配、机型和截图不匹配、提供给审核的账号和密码登陆不上）
4. 使用的隐私权限必须说明，文案描述必须清晰
5. App 存在 bug （账号无法登陆、没有适配 ipad、访问 h5 打不开  ）
6. 诱导用户打开查看更多 App
7. Android 应用未加固
8. 应用缺乏相关的资质和证书






- 敏感词扫描（发现敏感字：paymentType 位于1个文件，查看详情，此关键字极大概率影响审核，请移除）
  支持用户自定义检测关键词
- 私有 Api 扫描

## 方案

### 敏感词云

loan、online、ischeck、isonline、switch、review、审核、热更新、开关、代缴公积金


1. 关键词词云在什么阶段分析？
   构建前、构建后？
2. 词云要不要分等级，比如 error、warning。
   遇到 error 构建马上停止；waring 的话给出警告 console
3. 私有 api 要不要扫描，扫描的话怎么做？
   性质和关键词一样。做到一个 yml 文件里面。然后用正则将一堆关键词和每个代码文件进行匹配。
4. 私有 api 是做 top 100 呢？还是 top 50
5. 私有 api 要不要设置开关，让打包的人选择要不要扫描私有 api
6. 私有 api 扫描后怎么样展示出来。 console.log 吗？
7. 扫描是基于源代码出发的